(function(){this.vf={}}).call(this);$(function(){vf.util.initModules();vf.util.initHelpers();var a;$(window).on("resize",function(b){clearTimeout(a);a=setTimeout(function(){$(this).trigger("vf::resize")},100)});setTimeout(function(){$(window).trigger("scroll")},1E3)});
(function(){vf.util={initModules:function(a){var b=[],c=[],d=$(".mod",a);a=$(a);0===a.length&&(a=$(document));a.each(function(){$(this).hasClass("mod")&&(d=d.add($(this)))});d.each(function(){var a=$(this).prop("class").match(/mod-([^ ]+)/g)||0;$.each(a,function(c){c=a[c].replace("mod-","");vf[c]?b.push(c):window.console&&console.log("initModule: The module '"+c+"' does not exist")})});$.each(b,function(b,a){-1===$.inArray(a,c)&&c.push(a)});b=c;$.each(b,function(c){vf[b[c]].init(a)});return b},initHelpers:function(a){a=
$(a);0===a.length&&(a=$(document));vf.util.checkedState(a);vf.util.placeholderPoly(a);vf.util.mouseActive(a);vf.lazyload.init(a)},config:function(a){return"undefined"!==typeof vf.config[a]?vf.config[a]:!1},checkedState:function(a){var b=$(":checkbox, :radio",a);a.each(function(){$(this).is(":checkbox, :radio")&&(b=b.add($(this)))});var c=function(a){var b=$("label").filter('[for="'+a.prop("id")+'"]'),c=a.is(":radio")?"radio":"checkbox";a.is(":focus")?b.addClass("fm-focus"):a.is(":focus")||b.removeClass("fm-focus");
a.is(":checked")?("radio"==c&&d(a,e),b.addClass("checked")):e(a,b,c)},d=function(a){$(":radio").filter('[name="'+a.prop("name")+'"]').not(a).each(function(){var a=$(this),b=$("label").filter('[for="'+a.prop("id")+'"]'),c=a.is(":radio")?"radio":"checkbox";e(a,b,c)})},e=function(a,b,c){b.removeClass("checked")};$("body").off("change");$("body").on("change focus blur",":checkbox, :radio",function(){c($(this))});b.each(function(){c($(this))});return b},focus:function(a){a=$(a);"undefined"==typeof a.attr("tabindex")&&
(a.attr("tabindex","0"),setTimeout(function(){a.removeAttr("tabindex")},10));a.focus()},mouseActive:function(a){var b=$("body",a);b.on("mousedown",function(){b.addClass("mouse-active")});b.on("keydown",function(){b.removeClass("mouse-active")})},placeholderPoly:function(a){function b(a,b){a.val()===b&&a.val("").removeClass("placeholder")}function c(a,b){""!==a.val()&&a.val()!==b||a.val(b).addClass("placeholder")}if("placeholder"in document.createElement("input"))return!1;a=$(":input[placeholder]",
a).addBack(":input[placeholder]");a.each(function(){var a=$(this),e=a.prop("placeholder"),h=a.closest("form");c(a,e);a.bind("focus",function(){b(a,e)});a.bind("blur",function(){c(a,e)});h.bind("submit",function(){b(a,e)});$(window).bind("unload",function(){b(a,e)})});return a},layout:function(){var a="sml";"undefined"!=typeof window.matchMedia&&(620<=$(window).innerWidth()&&(a="med"),767<=$(window).innerWidth()&&(a="lrg"));return a}}})(vf);
$(function(){vf.carousel={settings:{carousel:".mod-carousel",blocks:".ca-body .ca-block",body:".ca-body",page:".ca-page",pages:".ca-pages",loader:".ca-load-more",pagination:".ca-pagination",nav:".ca-nav a",prime_nav:".ca-nav-primary",active_page:".ca-active",show:".ca-show"},init:function(a,b){var c=vf.carousel.settings;if(!("css3d"in c)){var d=document.body.style;c.css3d="transform"in d||"webkitTransform"in d}$(c.carousel,a).addBack(c.carousel).each(function(){var e=$(this),d=e.find(c.blocks),f=
d.outerWidth(!0),g=vf.carousel.cap(Math.floor(e.width()/f),1,e.data("span")),l=f*g;$.extend(e.data(),{computed_span:g,page_no:-1,page_count:Math.ceil(d.length/g)-1,translation:l,reversed:$(d.get().reverse()),animation_span:2*g-1,touchstart:0});"lrg"===vf.util.layout()?(e.find(c.body).height(d.outerHeight(!0)).width(l),d.each(function(a){var b=a%g*f,e=1;c.css3d?b+=l:a>=g&&(e=0);$(this).css({left:b,opacity:e})})):e.find(c.body).add(d).removeAttr("style");e.find(c.pagination+","+c.prime_nav).toggle(!!e.data("page_count")&&
"lrg"===vf.util.layout());vf.carousel.append_pages(e);b?d.css("transform","translateX(0)"):(e.on("click",c.page,$.proxy(vf.carousel.goto_page,e)).on("touchstart touchmove touchend",$.proxy(vf.carousel.touch,e)).on("click",c.loader,$.proxy(vf.carousel.loadMore,e)).find(c.nav).on("click",$.proxy(vf.carousel.get_goto_page,e)),e.find(c.loader).click(),$(window).on("vf::resize",$.proxy(vf.carousel.init,this,a,!0)));e.find(c.page).eq(0).click()})},get_goto_page:function(a){var b=vf.carousel.cap(this.data("page_no")+
$(a.currentTarget).data("direction"),0,this.data("page_count")),b=this.find(vf.carousel.settings.page).eq(b);vf.carousel.goto_page.apply(this,[a,b])},goto_page:function(a,b){if("lrg"===vf.util.layout()){var c=vf.carousel.settings,d=this.find(c.blocks),e=this.data("computed_span");b||(b=$(a.currentTarget));if(!b.is(c.active_page)){var h=b.parent().index(),f=this.data("page_no"),g=h*e,l=[g,g+e-1],k=[(f-1)*e,g-1],p=[k[0]+e,k[0]+this.data("animation_span")],m=0,n=-this.data("translation");h<f&&(k=[g+
e,p[1]+e],d=this.data("reversed"));d.each(function(){var a=$(this),b=a.index(),e=vf.carousel.in_range(b,l);if(c.css3d){var d=vf.carousel.in_range(b,k),g=a.data("animation_id"),q=1,r=n;if(e||d)d&&(0<h&&(r*=2),h<f&&(r=0),vf.carousel.in_range(b,p)||(q=0)),g&&clearTimeout(g),a.data("animation_id",setTimeout(function(){a.css({transform:"translateX("+r+"px)",transitionDuration:"."+5*q+"s"})},m*q*150)),a.toggleClass("ca-block-active",h==b),m+=1*q}else a.css("opacity",e?1:0)});this.data("page_no",h);this.find(c.active_page).removeClass("ca-active");
b.addClass("ca-active")}a.preventDefault()}},append_pages:function(a){for(var b="",c=0,d=a.data("page_count");c<=d;c++)b+='<li><a href="#" class="ca-page"><span class="access">'+vf.config.string.page+(c+1)+"</span></a></li>";a.find(vf.carousel.settings.pages).html(b)},touch:function(a){a=a.originalEvent;switch(a.type){case "touchstart":this.data("touchstart",a.touches[0].pageX);break;case "touchmove":25<=Math.abs(a.touches[0].pageX-this.data("touchstart"))&&a.preventDefault();break;case "touchend":a=
a.changedTouches[0].pageX;var b=this.data("touchstart");100<=Math.abs(a-b)&&this.find(vf.carousel.settings.nav).eq(b>a?1:0).click()}},in_range:function(a,b){return a>=b[0]&&a<=b[1]},cap:function(a,b,c){return a<b?b:a>c?c:a},loadMore:function(a){var b=this,c=vf.carousel.settings;a.preventDefault();b.find(c.blocks+":not("+c.show+")").each(function(a,e){if(a<b.data("span"))$(e).addClass(c.show.substring(1));else return!1});0===b.find(c.blocks+":not("+c.show+")").length&&b.find(c.loader).remove()}}}(vf));
(function(){vf["eq-height"]={settings:{target:".mod-eq-height"},init:function(a){var b=this.settings;"lrg"===vf.util.layout()&&$(b.target,a).addBack(b.target).each(function(){var a=0;$(this).find($(this).data("eq-height")).each(function(b){$(this).height()>a&&(a=$(this).outerHeight())}).css("min-height",a).addClass("eq-height")})}}})(vf);
(function(){$.extend($.expr[":"],{unfilled:function(a){a=$(a);return!a.is("option")&&""==a.prop("value")}});vf.form={settings:{target:"form:not([novalidate])",required:".fm-required",error:".fm-error",checked:":checked, .checkbox",pattern:"[data-pattern]",data:".fm-data",onkeyup:".fm-onkeyup",errors:".fm-errors",group:".fm-data-group",errorborder:".fm-error-border"},errors:[],init:function(a){var b=vf.form.settings;$(b.target,a).addBack(b.target).each(function(){var a=$(this);a.on("submit",vf.form.exec).attr("novalidate",
!0);a.find(b.required+","+b.pattern).on("change",$.proxy(vf.form.exec,a))})},exec:function(a){var b=$(this),c=vf.form.settings,d=b.is(c.onkeyup);switch(a.type){case "change":if(!d)break;case "submit":d||b.addClass(c.onkeyup.substring(1));default:vf.form.check.apply(a.currentTarget,[a])}a.preventDefault()},check:function(a){a=$(this);var b=vf.form.settings,c=b.required+","+b.pattern,d=vf.form.errors=[];a.find(b.error).add(a.siblings(b.error)).remove();$.unique(a.find(c).addBack(c)).each(function(){var a=
$(this),c=[a.has(":radio")[0],[a.has(b.checked)[0],$.noop,$.proxy(vf.form.error,a)],[a.is(b.required),[a.has(":unfilled")[0]||a.is(":unfilled"),$.proxy(vf.form.error,a),[a.has(b.pattern)[0]||a.is(b.pattern),$.proxy(vf.form.match,a),$.noop]],[a.has(":unfilled")[0]||a.is(":unfilled"),$.noop,$.proxy(vf.form.match,a)]]];a.removeClass(b.errorborder.substring(1));vf.form.climb(c)});a.find(b.errors).toggle(!!d.length).find("ol").html(d.join("")).end().find(":header").html(vf.config.form.html.eheading.replace("{{count}}",
d.length))},climb:function(a){return"function"==typeof a?a():vf.form.climb(a[0]?a[1]:a[2])},match:function(){var a=this;a.find("input").addBack("input").each(function(){var b=$(this),c=vf.config.form.patterns[b.data("pattern")];if(!b.val().match(c.match))return vf.form.error.apply(a,[c.error])})},error:function(a){var b=vf.form.settings;a=a||vf.config.form.html.required;var c=this.parent(b.data).addBack("fieldset"+b.required),d=vf.config.form.html.error.replace("{{message}}",a);vf.form.errors.push('<li><a href="#'+
this.attr("id")+'">'+a+"</a></li>");c.prepend(d).find("label").prepend('<span class="\terror access">'+vf.config.string.error+"</span>");this.addClass(b.errorborder.substring(1))}}})(vf);
(function(){vf.nav={settings:{target:".mod-nav",active:"nav-active",trigger:".nav-trigger",base:".nav-base",close:".nav-close",aux:".nav-aux"},init:function(a){var b=this.settings;$(b.target,a).addBack(b.target).each(function(){var a=$(this),d=a.find(b.base),e=a.find(b.trigger),h=a.find(b.close);a.find(b.aux);var f=a.find("[data-target]");f.each(function(){$(this).prepend('<span class="access">'+vf.config.string.show+"</span>").append('<span class="access">'+vf.config.string.menu+"</span>")});e.find("span:first, span:last").remove().end().prepend('<span class="access">'+
vf.config.string.show+"</span>");h.append('<span class="access">'+vf.config.string.hide+vf.config.string.menu+"</span>");a.find(".bs-count").append("<span class='access'> "+vf.config.string.basket+" </span>");f.on("click",function(g){var l=$(this),k=l.data("target")||l.attr("href"),f=l.parent().hasClass(b.active),k=a.find(k);vf.nav.close(a);f||(l.parent().add(k).add(h).addClass(b.active),vf.util.focus(k),$(document).on("mouseup focusin",null,a,vf.nav.bodyBind));0<d.has(l).length&&(f?e.removeClass(b.active):
e.addClass(b.active));g.preventDefault()});h.on("click",function(b){vf.nav.close(a);b.preventDefault()});a.find(".jump-link").on("click",function(){vf.util.focus($("#content"))});a.on("keydown",".foot .nav-close",function(b){var d=$(this).parent().parent().parent().attr("id");nextlink=a.find("[data-target='#"+d+"']");b.preventDefault();vf.util.focus(nextlink);vf.nav.close(a)});a.on("keydown",".items li",function(a){var b=$(this),c=b.parent().parent().next(),d=b.parent().parent().prev();39===a.keyCode?
(a=b.index(),a=c.find("li").eq(a),1===a.length?a.find("a").focus():c.find("li:last-child").find("a").focus()):37===a.keyCode?(a=b.index(),a=d.find("li").eq(a),1===a.length?a.find("a").focus():d.find("li:last-child").find("a").focus()):38===a.keyCode?(a.preventDefault(),b.prev("li").find("a").focus()):40===a.keyCode&&(a.preventDefault(),b.next("li").find("a").focus())})})},close:function(a){var b=this.settings;a.find("."+b.active).removeClass(b.active).prev("span").html(vf.config.string.show);$(document).off("mouseup focusin",
vf.nav.bodyBind)},bodyBind:function(a){var b=a.data;0===b.has(a.target).length&&vf.nav.close(b)}}})(vf);
(function(){vf.lazyload={settings:{unloaded:"img[data-src]",lazy:".lazyloaded"},init:function(a){$(window).on("resize scroll click",$.proxy(vf.lazyload.update,a));vf.lazyload.update.call(a)},update:function(){var a=vf.lazyload.settings;$(this).find(a.unloaded).each(function(){var b=$(this);vf.lazyload.inViewport(b)&&(setTimeout(function(){b.not(a.lazy).wrap('<span class="lazyloader">')},1500),b.attr("src",b.data("src")).removeData("src").ready(function(){b.addClass(a.lazy.substring(1));b.removeAttr("height").removeAttr("width")}))})},
inViewport:function(a){var b=a.offset(),c=$(window).scrollTop(),d=$(window).scrollLeft();return $(window).innerHeight()+c>b.top&&$(window).innerWidth()+d>b.left&&c<b.top+a.outerHeight(!0)&&d<b.left+a.outerWidth(!0)}}})(vf);
(function(){vf["multi-select"]={settings:{target:".mod-multi-select",imagesClass:"ms-images",iconActive:"i-step-number-alt",iconSelected:"i-success",iconDisabled:"i-step-number",separator:" \u2014 ",select:'<div class="fm-data"><label for="{id}"><span class="icon-wrap"><i class="">{num}</i></span>{label}</label><div class="fm-select"><select id="{id}"></select><span><i class="i-arrow-down-grey-lrg"></i></span></div></div>',hiddenInput:'<input type="hidden" name="{name}" class="original-select" value="">',
option:'<option value="{name}">{name}</option>',li:'<li class="{show}"><div><img src="{src}"><span>{name}</span></div></li>',imageList:'<div class="ms-images cf only-{size}" data-id="{id}"><ul class="cta-topic">{li}</ul>{more}</div>'},init:function(a){var b=this.settings;$(b.target,a).each(function(){var a=$(this),d=a.attr("id"),e=a.data("labels").split(";"),h,f="";h=vf["multi-select"].generateTree(a);for(var g=1;g<=e.length;g++)f+=b.select.replace(/\{id\}/g,d+g).replace(/\{label\}/g,e[g-1]).replace(/\{num\}/g,
g),4==g&&(f=f.replace(/fm\-data/g,"fm-data ms-quart"));$("select",a).each(function(){f+=b.hiddenInput.replace(/\{name\}/g,$(this).attr("name"))});a.html(f);vf["multi-select"].updateSelect(h,a);a.on("change","select",function(b){b=parseInt($(b.target).attr("id").replace(d,""));vf["multi-select"].updateSelect(h,a,b)});vf["multi-select"].prePopulate(h,a);a.on("click","."+b.imagesClass+" li div",function(d){d=$(d.target).closest("div");a.find("#"+d.closest("."+b.imagesClass,a).data("id")).val($("span",
d).text()).change()});a.on("click",".ms-view-more .btn",vf["multi-select"].viewMore)})},viewMore:function(a){a.preventDefault();$(a.target).parent(".ms-view-more").prev().find("li").addClass("show").end().end().remove()},generateTree:function(a){function b(a){var b={},g;b.img=a.data("img");"OPTION"!=a[0].tagName&&(b.children={});switch(a[0].tagName){case "SELECT":d[e]=b;break;case "OPTGROUP":d[e].children[h]=b;break;case "OPTION":g=a.text().split(c.separator),g[1]?(a.siblings().addBack().each(function(a,
d){d=$(d);var e=d.text().split(c.separator);g[0]==e[0]&&(d.data("img-main")&&(b.img=d.data("img-main")),b.children||(b.children={}),b.children[e[1]]={},b.children[e[1]].img=d.data("img"),b.children[e[1]].val=f+"="+d.attr("value"),d.data("skip",!0))}),d[e].children[h].children[g[0]]=b):(b.val=f+"="+a.attr("value"),d[e].children[h].children[a.text()]=b)}}var c=this.settings,d={},e,h,f,g=0;$("select",a).each(function(c){c=$(this);e=$("label[for="+c.attr("id")+"]",a).text();f=c.attr("name");b(c);g++;
$("optgroup",c).each(function(){var a=$(this);h=a.attr("label");b(a);$("option",a).each(function(){var a=$(this);a.data("skip")||b(a)})})});1==g&&(d=d[e].children);return d},prePopulate:function(a,b,c){$("select",b).each(function(){var d=$(this),e=d.attr("id"),h=parseInt(e.replace(c,""));if(e=decodeURI((RegExp("[?|&]"+e+"=(.+?)(&|$)").exec(location.search)||[])[1]))d.val(e),vf["multi-select"].updateSelect(a,b,h)})},updateSelect:function(a,b,c){var d=this.settings,e='<div class=" ms-view-more"><a href="#" class="btn btn-sml btn-alt">'+
vf.config.string["view-more"]+"</a></div>",h=b.attr("id"),f=a,g=$(".fm-data",b).hasClass("ms-quart"),l=[],k="",p="",m=1,n=1;$("select",b).each(function(a){if(!this.value||a>=c)return!1;l.push(this.value);f=f[this.value].val?f[this.value]:f[this.value].children;m=a+2});$("select",b).each(function(a){var c=$(this),e=c.closest(".fm-data",b),h=c.closest(".fm-data",b).find("label i"),k;m-1==a?(e.addClass("ms-active").css("opacity","1"),h.attr("class",d.iconActive)):m-1>a?(e.removeClass("ms-active"),h.attr("class",
d.iconSelected)):(e.removeClass("ms-active").css("opacity",".6"),h.attr("class",d.iconDisabled));m-1<a&&c.prop("disabled","disabled").html("");if(3==a&&g&&(c.closest(".fm-data").hide(),4<=m))for(k in f)if(f[k].val||4<m){c.closest(".fm-data").show();break}});vf["multi-select"].updateOriginal(f.val,b);f.val||(k+=d.option.replace(/\{name\}/g,"").replace(/\{val\}/g,""),$.each(f,function(a,b){k+=d.option.replace(/\{name\}/g,a);p+=d.li.replace(/\{src\}/g,b.img).replace(/\{name\}/g,a).replace(/\{show\}/g,
12>=n?"show":"");n++}),$("#"+h+m,b).html(k).prop("disabled",!1),b.data("images")&&($("."+d.imagesClass,b).remove(),k=d.imageList.replace(/\{li\}/g,p).replace(/\{id\}/g,h+m).replace(/\{more\}/g,12<n?e:""),b.append(k.replace(/\{size\}/g,"lrg")),$("#"+h+m,b).closest(".fm-data",b).after(k.replace(/\{size\}/g,"sml"))))},updateOriginal:function(a,b){a=a?a.split("="):[a];$(".original-select",b).each(function(){var c=$(this).attr("name");$("input[name="+c+"]",b).attr("value",c==a[0]?a[1]:"")});a[1]&&b.is("form")&&
b.submit()}}})(vf);
(function(){vf.quicklinks={settings:{target:".mod-quicklinks",username:"#ql-username",password:"#ql-password",box:".ql-login",lastFocus:""},init:function(a){var b=this.settings,c=$("#ql-password, #ql-username");$(b.target,a).addBack(b.target).each(function(){c.bind("focus",$.proxy(vf.quicklinks.open,this));c.bind("focusout",$.proxy(vf.quicklinks.close,this))})},open:function(a){$(this).addClass("ql-display")},close:function(a){var b=vf.quicklinks.settings,c=$(this);a=$(a.currentTarget);var d=c.find(b.username),
e=c.find(b.password);""===e.val()&&""===d.val()&&(c.removeClass("ql-display"),a.is(e)&&b.lastFocus==b.username&&c.find(b.box).next().find("a, input").filter(":visible").eq(0).focus());b.lastFocus="#"+a.attr("id")}}})(vf);
(function(){vf.toggle={settings:{target:".mod-toggle",head:".tg-head",body:".tg-body",active:".tg-active",modal:".tg-modal",close:".tg-close",ajax:".tg-ajax",more:".tg-more",display:".tg-display"},init:function(a){var b=vf.toggle.settings,c=vf.toggle.html={modal_content:'<div class="tg-body"><div class="tg-ajax"></div><a href="#" class="tg-close">'+vf.config.string["close-modal"]+'<i class="i-close-lrg"></i></a><div class="tg-overlay tg-close"></div></div>',access:{standard:'<span class="access"><span class="tg-hide">'+
vf.config.string.hide+' </span><span class="tg-show">'+vf.config.string.show+" </span></span>",standardEnd:'<span class="access">'+vf.config.string["tg-content"]+" </span>"}};$(b.target,a).addBack(b.target).each(function(){var a=$(this),e=$(b.head,a);$(b.close,a);"lrg"===vf.util.layout()&&a.is(b.modal)&&a.append(c.modal_content);a.on("click",b.head+", "+b.close,$.proxy(vf.toggle.toggle,a));e.prepend(vf.toggle.html.access.standard);e.append(vf.toggle.html.access.standardEnd)})},toggle:function(a){var b=
this.data("scope"),c=vf.util.layout(),d=vf.toggle.settings,e=$(a.currentTarget);this.data("hint");var h=this.hasClass("tg-accord")||this.hasClass("tg-tabs"),f=d.active.substring(1),g=d.display.substring(1),l=e.is(d.close),k=e.attr("href"),p=k?k.indexOf("#"):0;if($("body").hasClass("mouse-active")||!this.hasClass("tg-modal"))if(!this.hasClass("tg-modal")||"lrg"===vf.util.layout())if(!b||c==b||"med"==c)if(l?b=e.closest(d.body):1==this.find(d.body).length?(b=$(d.body,this),console.log(this)):b=e.next().hasClass("tg-body")?
e.next(d.body):$(k),0!==b.length){a.preventDefault();if(h&&(a=this.find(d.active),this.find(d.body).removeClass(g),a.removeClass(f),e.is(a)&&!this.hasClass("tg-tabs")&&!this.hasClass("footer")||l))return 0;l||e.toggleClass(f);b.toggleClass(g);if(0!=p&&-1!=p){var k=e.prop("href"),m=k.substring(k.indexOf("#")),n=$(d.ajax,b).addBack().last();n.css("min-height",n.height()).attr("aria-live","polite").append(vf.config.ajax_load).delay(2E3).queue(function(){n.load(k+" "+m,function(){vf.util.initModules(n);
vf.util.initHelpers(n);n.css("min-height","").attr("aria-live","")})}).dequeue()}$(window).trigger("scroll")}}}})(vf);